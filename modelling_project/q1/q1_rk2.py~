
import numpy as np
import matplotlib.pyplot as plt


def ode_rk2(ode,bound_vals,h,b):

    x_sol = []
    y_sol = []
    
    b = float(b)
    a = 1-b
    alpha = float(0.5)/b
    beta = float(0.5)/b

    x_prev = bound_vals[0][0]
    y_prev = bound_vals[0][1]

    x_sol.append(x_prev)
    y_sol.append(y_prev)

    x_curr = x_prev + h
    y_curr = y_prev + h*(a*ode(x_prev,y_prev)+b*ode(x_prev+alpha*h,y_prev+beta*h))

    x_sol.append(x_curr)
    y_sol.append(y_curr)
    
    while x_curr < bound_vals[1][0]:
        x_prev = x_curr
        y_prev = y_curr
        x_curr = x_prev + h
        y_curr = y_prev + h*(a*ode(x_prev,y_prev)+b*ode(x_prev+alpha*h,y_prev+beta*h))
        x_sol.append(x_curr)
        y_sol.append(y_curr)

    return x_sol,y_sol

test_a = lambda x,y: x*np.sqrt(1-(y-4)**2)
test_a_bounds = [[0,4],[3]]

sol_a = ode_rk2(test_a,test_a_bounds,0.1,0.4)

plt.plot(sol_a[0],sol_a[1])
plt.show()
